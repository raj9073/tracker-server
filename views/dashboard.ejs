<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/head', { title: 'Dashboard - Links' }) %>
</head>
<body>
  <div class="container">
    <div class="flex" style="justify-content: space-between; align-items: center;">
      <h1 style="margin: 0;">Links</h1>
      <form method="POST" action="/logout" style="margin: 0;">
        <button type="submit" class="btn btn-danger">Logout</button>
      </form>
    </div>
    <% if (links.length === 0) { %>
      <p class="mt">No links yet. <a href="/">Create one</a></p>
    <% } else { %>
      <div class="mt">
        <% links.forEach(function(link) { %>
          <div class="card flex" style="justify-content: space-between;">
            <div>
              <a href="/dashboard/links/<%= link.id %>"><strong>/<%= link.short_code %></strong></a>
              <span style="color: #8b949e;"> → <%= link.original_url %></span>
              <br>
              <small style="color: #8b949e;"><%= link.click_count %> clicks · <%= new Date(link.created_at).toLocaleString() %></small>
            </div>
            <a href="/<%= link.short_code %>" target="_blank" class="btn btn-primary">Open</a>
          </div>
        <% }); %>
      </div>
    <% } %>
    <p class="mt"><a href="/">Create new link</a></p>
  </div>
</body>
</html>
